<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Read this solar energy guide and learn expert tips on solar panels, installation, and sustainable living.">
    <meta name="keywords" content="solar energy, solar panels, renewable energy, solar guide">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Blog Post Title | Solarkits">
    <meta property="og:description" content="Blog post description goes here.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://solarkits.com/blog/post">

    <title id="page-title">Blog Post | Solarkits</title>

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="../css/styles.css">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../images/site/favicon.svg">
</head>
<body>
    <!-- Skip to Content Link - Accessibility -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- Header & Navigation -->
    <header class="header" id="header" role="banner">
        <div class="container">
            <nav class="nav">
                <div class="nav__logo">
                    <a href="../index.html" class="logo">
                        <img src="../images/site/logo.svg" alt="Solarkits Logo" class="logo__icon" width="40" height="40">
                        <span class="logo__text">solarkits</span>
                    </a>
                </div>

                <div class="nav__menu" id="nav-menu">
                    <ul class="nav__list">
                        <li class="nav__item">
                            <a href="../index.html" class="nav__link">Home</a>
                        </li>
                        <li class="nav__item">
                            <a href="blog.html" class="nav__link nav__link--active">Blog</a>
                        </li>
                        <li class="nav__item">
                            <a href="categories.html" class="nav__link">Shop</a>
                        </li>
                        <li class="nav__item">
                            <a href="about.html" class="nav__link">About</a>
                        </li>
                        <li class="nav__item">
                            <a href="contact.html" class="nav__link">Contact</a>
                        </li>
                    </ul>

                    <div class="nav__search">
                        <input
                            type="search"
                            class="search__input"
                            id="search-input"
                            placeholder="Search..."
                            aria-label="Search">
                        <button class="search__button" aria-label="Search">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM19 19l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="nav__toggle" id="nav-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main" id="main-content" role="main">
        <!-- Breadcrumb -->
        <nav class="breadcrumb" aria-label="Breadcrumb">
            <div class="container">
                <ol class="breadcrumb__list">
                    <li class="breadcrumb__item">
                        <a href="../index.html">Home</a>
                    </li>
                    <li class="breadcrumb__item">
                        <a href="blog.html">Blog</a>
                    </li>
                    <li class="breadcrumb__item breadcrumb__item--active" id="breadcrumb-title">
                        Article Title
                    </li>
                </ol>
            </div>
        </nav>

        <!-- Blog Post Content -->
        <article class="blog-post">
            <div class="container container--narrow">
                <!-- Post Header -->
                <header class="blog-post__header">
                    <!-- Back Link -->
                    <a href="blog.html" class="blog-post__back">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back to Blog
                    </a>

                    <!-- Title -->
                    <h1 class="blog-post__title" id="post-title">Blog Post Title Goes Here</h1>

                    <!-- Featured Image -->
                    <div class="blog-post__featured-image">
                        <img id="post-featured-image" src="https://via.placeholder.com/1200x600/FF9800/FFFFFF?text=Featured+Image" alt="Featured image">
                    </div>
                </header>

                <!-- Meta & Social Sharing (below image) -->
                <div class="blog-post__meta-section">
                    <div class="blog-post__meta">
                        <span class="blog-post__date" id="post-date">Published April 29, 2025</span>
                        <span class="blog-post__author" id="post-author">By Sunrun Experts</span>
                    </div>
                    <div class="blog-post__share-header">
                        <p class="blog-post__share-label">SHARE TO SOCIAL MEDIA</p>
                        <div class="social-share social-share--compact">
                            <button class="social-share__btn social-share__btn--facebook" aria-label="Share on Facebook">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/>
                                </svg>
                            </button>
                            <button class="social-share__btn social-share__btn--linkedin" aria-label="Share on LinkedIn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"/>
                                    <circle cx="4" cy="4" r="2"/>
                                </svg>
                            </button>
                            <button class="social-share__btn social-share__btn--twitter" aria-label="Share on Twitter">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Post Content -->
                <div class="blog-post__content" id="post-content">
                    <!-- Content will be inserted here by JavaScript -->
                    <p>This is sample blog post content. The actual content will be loaded dynamically from the blog data.</p>
                </div>

                <!-- Social Sharing -->
                <div class="blog-post__share">
                    <h3>Share this article</h3>
                    <div class="social-share">
                        <button class="social-share__btn social-share__btn--twitter" aria-label="Share on Twitter">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                            </svg>
                            <span>Twitter</span>
                        </button>
                        <button class="social-share__btn social-share__btn--facebook" aria-label="Share on Facebook">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/>
                            </svg>
                            <span>Facebook</span>
                        </button>
                        <button class="social-share__btn social-share__btn--linkedin" aria-label="Share on LinkedIn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"/>
                                <circle cx="4" cy="4" r="2"/>
                            </svg>
                            <span>LinkedIn</span>
                        </button>
                        <button class="social-share__btn social-share__btn--copy" aria-label="Copy link">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                            </svg>
                            <span>Copy Link</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Recommended Products Section -->
            <section class="recommended-products">
                <div class="container">
                    <h2 class="section__title">Recommended Products</h2>
                    <p class="recommended-products__subtitle">Based on this article, you might be interested in these solar products:</p>
                    <div class="products__grid" id="recommended-products-grid">
                        <!-- Product cards will be inserted here -->
                    </div>
                </div>
            </section>

            <!-- Related Posts Section -->
            <section class="related-posts">
                <div class="container">
                    <h2 class="section__title">Related Articles</h2>
                    <div class="blog-grid blog-grid--related" id="related-posts-grid">
                        <!-- Related blog cards will be inserted here -->
                    </div>
                </div>
            </section>
        </article>

        <!-- Newsletter CTA Section -->
        <section class="newsletter-cta">
            <div class="container">
                <div class="newsletter-cta__content">
                    <div class="newsletter-cta__text">
                        <h2>Get More Solar Insights</h2>
                        <p>Subscribe to receive expert solar tips and exclusive product deals.</p>
                    </div>
                    <form class="newsletter-form newsletter-form--inline" id="newsletter-form-post">
                        <input
                            type="email"
                            class="newsletter__input"
                            placeholder="Your email address"
                            aria-label="Email address"
                            required>
                        <button type="submit" class="newsletter__button">Subscribe</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer__grid">
                <!-- Brand Column -->
                <div class="footer__column">
                    <div class="footer__logo">
                        <img src="../images/site/logo.svg" alt="Solarkits Logo" class="logo__icon" width="40" height="40">
                        <span class="logo__text">solarkits</span>
                    </div>
                    <p class="footer__description">
                        Your trusted source for solar energy products and solutions.
                        Powering homes and lives with clean, reliable solar energy.
                    </p>
                </div>

                <!-- Quick Links -->
                <div class="footer__column">
                    <h3 class="footer__title">Quick Links</h3>
                    <ul class="footer__links">
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="categories.html">Shop</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>

                <!-- Legal -->
                <div class="footer__column">
                    <h3 class="footer__title">Legal</h3>
                    <ul class="footer__links">
                        <li><a href="disclaimer.html">Affiliate Disclaimer</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="terms.html">Terms of Service</a></li>
                    </ul>
                </div>

                <!-- Newsletter -->
                <div class="footer__column">
                    <h3 class="footer__title">Stay Updated</h3>
                    <p class="footer__newsletter-text">Get the latest solar deals and energy tips delivered to your inbox.</p>
                    <form class="newsletter-form" id="newsletter-form-footer">
                        <input
                            type="email"
                            class="newsletter__input"
                            placeholder="Your email"
                            aria-label="Email address"
                            required>
                        <button type="submit" class="newsletter__button">Subscribe</button>
                    </form>
                </div>
            </div>

            <!-- Footer Bottom -->
            <div class="footer__bottom">
                <p class="footer__copyright">
                    &copy; 2025 Solarkits. All rights reserved.
                </p>
                <p class="footer__disclaimer">
                    As an Amazon Associate and AliExpress affiliate, we earn from qualifying purchases.
                </p>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button class="scroll-top" id="scroll-top" aria-label="Scroll to top">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M12 19V5M5 12l7-7 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </button>

    <!-- JavaScript -->
    <script src="../js/notification.js"></script>
    <script src="../js/main.js" defer></script>
    <script>
        // Blog Post Loading Logic
        // This would typically load based on URL parameter or slug
        // For now, it loads the first featured post as an example

        document.addEventListener('DOMContentLoaded', function() {
            loadBlogPost();
        });

        async function loadBlogPost() {
            try {
                // Get post ID from URL parameter (e.g., ?post=blog-001)
                const urlParams = new URLSearchParams(window.location.search);
                const postId = urlParams.get('post');

                if (!postId) {
                    console.error('No post ID provided');
                    return;
                }

                // Fetch single blog post from API
                const response = await fetch(`/api/public/blog/${postId}`);
                const post = await response.json();

                if (post) {
                    displayBlogPost(post);
                    loadRecommendedProducts(post.relatedProducts || []);
                    // Fetch all posts for related posts section
                    const allPostsResponse = await fetch('/api/public/blog');
                    const allPostsData = await allPostsResponse.json();
                    loadRelatedPosts(allPostsData.posts, post);
                }
            } catch (error) {
                console.error('Error loading blog post:', error);
            }
        }

        function displayBlogPost(post) {
            // Update page title and meta
            document.title = `${post.title} | Solarkits`;
            const pageTitle = document.getElementById('page-title');
            if (pageTitle) pageTitle.textContent = `${post.title} | Solarkits`;

            const breadcrumbTitle = document.getElementById('breadcrumb-title');
            if (breadcrumbTitle) breadcrumbTitle.textContent = post.title;

            // Update post content
            const postDate = document.getElementById('post-date');
            if (postDate) postDate.textContent = `Published ${formatDate(post.date)}`;

            const postAuthor = document.getElementById('post-author');
            if (postAuthor) postAuthor.textContent = `By ${post.author}`;

            const postTitle = document.getElementById('post-title');
            if (postTitle) postTitle.textContent = post.title;

            const postImage = document.getElementById('post-featured-image');
            if (postImage) {
                postImage.src = post.featuredImage;
                postImage.alt = post.title;
            }

            const postContent = document.getElementById('post-content');
            if (postContent) postContent.innerHTML = post.content;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
        }

        async function loadRecommendedProducts(productIds) {
            if (!productIds || productIds.length === 0) return;

            try {
                const response = await fetch('/api/public/products');
                const data = await response.json();

                const recommendedProducts = data.products.filter(p => productIds.includes(p.id));
                const grid = document.getElementById('recommended-products-grid');

                if (recommendedProducts.length > 0) {
                    grid.innerHTML = recommendedProducts.slice(0, 3).map(createProductCard).join('');
                }
            } catch (error) {
                console.error('Error loading recommended products:', error);
            }
        }

        function createProductCard(product) {
            const amazonLink = product.affiliates.amazon.available ? product.affiliates.amazon.url : '#';
            const aliexpressLink = product.affiliates.aliexpress.available ? product.affiliates.aliexpress.url : '#';

            return `
                <div class="product-card">
                    <div class="product-card__image-wrapper">
                        <img src="${product.image.thumb}" alt="${product.name}" class="product-card__image" loading="lazy">
                    </div>
                    <div class="product-card__content">
                        <p class="product-card__category">${formatCategory(product.category)}</p>
                        <h3 class="product-card__title">${product.name}</h3>
                        <div class="product-card__price">
                            ${product.price.display}
                        </div>
                        <div class="product-card__cta">
                            ${product.affiliates.amazon.available ?
                                `<a href="${amazonLink}" class="btn btn--amazon" target="_blank" rel="noopener">Amazon</a>` : ''}
                            ${product.affiliates.aliexpress.available ?
                                `<a href="${aliexpressLink}" class="btn btn--aliexpress" target="_blank" rel="noopener">AliExpress</a>` : ''}
                        </div>
                    </div>
                </div>
            `;
        }

        function formatCategory(category) {
            return category.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
        }

        function loadRelatedPosts(allPosts, currentPost) {
            // Get posts from the same category, excluding current post
            const relatedPosts = allPosts
                .filter(p => p.category === currentPost.category && p.id !== currentPost.id)
                .slice(0, 3);

            const grid = document.getElementById('related-posts-grid');

            if (relatedPosts.length > 0) {
                grid.innerHTML = relatedPosts.map(createBlogCard).join('');
            } else {
                grid.innerHTML = '<p>No related articles found.</p>';
            }
        }

        function createBlogCard(post) {
            return `
                <div class="blog-card">
                    <a href="blog-post-template.html?post=${post.id}" class="blog-card__link">
                        <div class="blog-card__image">
                            <img src="${post.featuredImage}" alt="${post.title}" loading="lazy">
                            <span class="blog-card__category">${post.category}</span>
                        </div>
                        <div class="blog-card__content">
                            <h3 class="blog-card__title">${post.title}</h3>
                            <p class="blog-card__excerpt">${post.excerpt}</p>
                            <div class="blog-card__meta">
                                <span class="blog-card__date">${formatDate(post.date)}</span>
                                <span class="blog-card__author">${post.author}</span>
                            </div>
                        </div>
                    </a>
                </div>
            `;
        }

        // Social sharing functionality
        document.querySelectorAll('.social-share__btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const url = window.location.href;
                const title = document.getElementById('post-title').textContent;

                if (this.classList.contains('social-share__btn--twitter')) {
                    window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`, '_blank');
                } else if (this.classList.contains('social-share__btn--facebook')) {
                    window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
                } else if (this.classList.contains('social-share__btn--linkedin')) {
                    window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank');
                } else if (this.classList.contains('social-share__btn--copy')) {
                    navigator.clipboard.writeText(url).then(() => {
                        if (window.notify) {
                            window.notify.success('Link copied to clipboard!');
                        }
                    });
                }
            });
        });

        // Newsletter form handlers
        const forms = ['newsletter-form-post', 'newsletter-form-footer'];
        forms.forEach(formId => {
            const form = document.getElementById(formId);
            if (form) {
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = form.querySelector('input[type="email"]').value;
                    if (window.notify) {
                        window.notify.success('Thank you for subscribing!');
                    }
                    form.reset();
                });
            }
        });
    </script>
</body>
</html>
